{
  "version": 1,
  "app": "SOS Expat",
  "schema": "sos-expat.message.template/v1",
  "locale": "en",
  "defaults": {
    "from_email": "SOS Expat <no-reply@sos-expat.app>",
    "reply_to": "SOS Expat Support <support@sos-expat.app>",
    "sms_sender_id": "SOSXPAT",
    "push_icon": "ic_notification",
    "push_channel_id": "general",
    "deeplink_base": "sos-expat://"
  },
  "templates": [
    {
      "id": "call.scheduled.provider",
      "roles": ["provider"],
      "channels": {
        "email": false,
        "sms": false,
        "push": false,
        "inapp": true,
        "whatsapp": false
      },
      "inapp": {
        "title": "Call scheduled",
        "body": "Call with {{clientName}} in 5 minutes",
        "action": {
          "label": "View",
          "deeplink": "/provider/dashboard"
        }
      }
    },
    {
      "id": "call.scheduled.client",
      "roles": ["client"],
      "channels": {
        "email": false,
        "sms": false,
        "push": false,
        "inapp": true,
        "whatsapp": false
      },
      "inapp": {
        "title": "Call scheduled",
        "body": "Your call with {{providerName}} for ¬´{{title}}¬ª is confirmed",
        "action": {
          "label": "View",
          "deeplink": "/calls"
        }
      }
    },
    {
      "id": "user.signup.success",
      "roles": ["client"],
      "channels": {
        "email": false,
        "sms": false,
        "push": false,
        "inapp": false,
        "whatsapp": false
      }
    },
    {
      "id": "provider.signup.success",
      "roles": ["provider"],
      "channels": {
        "email": false,
        "sms": false,
        "push": false,
        "inapp": false,
        "whatsapp": false
      }
    },
    {
      "id": "user.profile.incomplete.d1",
      "roles": ["client"],
      "channels": {
        "email": false,
        "sms": false,
        "push": false,
        "inapp": false,
        "whatsapp": false
      }
    },
    {
      "id": "provider.profile.incomplete.d1",
      "roles": ["provider"],
      "channels": {
        "email": false,
        "sms": false,
        "push": false,
        "inapp": false,
        "whatsapp": false
      }
    },
    {
      "id": "request.created.client",
      "roles": ["client"],
      "channels": {
        "email": false,
        "sms": false,
        "push": false,
        "inapp": false,
        "whatsapp": false
      }
    },
    {
      "id": "request.created.provider",
      "roles": ["provider"],
      "channels": {
        "email": false,
        "sms": false,
        "push": false,
        "inapp": false,
        "whatsapp": false
      }
    },
    {
      "id": "request.needs_changes.client",
      "roles": ["client"],
      "channels": {
        "email": false,
        "sms": false,
        "push": false,
        "inapp": false,
        "whatsapp": false
      }
    },
    {
      "id": "request.approved.client",
      "roles": ["client"],
      "channels": {
        "email": false,
        "sms": false,
        "push": false,
        "inapp": false,
        "whatsapp": false
      }
    },
    {
      "id": "checkout.abandoned.client.24h",
      "roles": ["client"],
      "channels": {
        "email": false,
        "sms": false,
        "push": false,
        "inapp": false,
        "whatsapp": false
      }
    },
    {
      "id": "payment.succeeded.client",
      "roles": ["client"],
      "channels": {
        "email": false,
        "sms": false,
        "push": false,
        "inapp": false,
        "whatsapp": false
      }
    },
    {
      "id": "payment.failed.client",
      "roles": ["client"],
      "channels": {
        "email": false,
        "sms": false,
        "push": false,
        "inapp": false,
        "whatsapp": false
      }
    },
    {
      "id": "booking_paid_provider",
      "roles": ["provider"],
      "channels": {
        "email": true,
        "sms": true,
        "push": false,
        "inapp": true,
        "whatsapp": false
      },
      "email": {
        "subject": "üÜò SOS Expat: New booking from {{client.firstName}}!",
        "html": "<h2>New Booking Request!</h2><p>A client needs your help:</p><table style=\"border-collapse:collapse;margin:16px 0;\"><tr><td style=\"padding:8px;border:1px solid #ddd;\"><strong>Client</strong></td><td style=\"padding:8px;border:1px solid #ddd;\">{{client.firstName}}</td></tr><tr><td style=\"padding:8px;border:1px solid #ddd;\"><strong>Nationality</strong></td><td style=\"padding:8px;border:1px solid #ddd;\">{{client.nationality}}</td></tr><tr><td style=\"padding:8px;border:1px solid #ddd;\"><strong>Country</strong></td><td style=\"padding:8px;border:1px solid #ddd;\">{{request.country}}</td></tr><tr><td style=\"padding:8px;border:1px solid #ddd;\"><strong>Languages</strong></td><td style=\"padding:8px;border:1px solid #ddd;\">{{clientLanguagesFormatted}}</td></tr></table><h3>Request Details</h3><p><strong>Title:</strong> {{request.title}}</p><p><strong>Description:</strong> {{request.description}}</p><p style=\"background:#e8f5e9;padding:12px;border-radius:4px;\">üí∞ <strong>You will earn {{providerEarnings}}{{currencySymbol}}</strong> for this call (may vary slightly depending on your bank's exchange rates).</p><p>üì± <a href=\"https://sos-expat.com/en-us/dashboard/subscription\">Log in to your AI tool</a> for help with your responses.</p><p style=\"background:#fff3e0;padding:12px;border-radius:4px;\">‚ö†Ô∏è <strong>WARNING:</strong> If you miss the call, you will be automatically set offline and will need to reconnect manually. This will also impact your visibility score.</p>"
      },
      "sms": {
        "text": "SOS Expat: {{client.firstName}}\n{{request.title}}\n{{request.description}}"
      },
      "inapp": {
        "title": "New paid booking",
        "body": "{{client.firstName}} ({{request.country}}) - {{request.title}}",
        "action": {
          "label": "View",
          "deeplink": "/provider/dashboard"
        }
      }
    },
    {
      "id": "call.cancelled.client_no_answer",
      "roles": ["provider"],
      "channels": {
        "email": true,
        "sms": true,
        "push": false,
        "inapp": true,
        "whatsapp": false
      },
      "email": {
        "subject": "SOS Expat: Call cancelled - Client {{clientName}} did not answer",
        "html": "<h2>Call Cancelled</h2><p>We apologize, the client <strong>{{clientName}}</strong> did not answer the call after several attempts.</p><p>The call has been cancelled and the client has been refunded.</p><p style=\"background:#e3f2fd;padding:12px;border-radius:4px;\">‚úÖ <strong>You did nothing wrong</strong> - this happens sometimes. You remain available for new bookings.</p><p>Thank you for your understanding.</p><p><a href=\"https://sos-expat.com/en-us/dashboard\">Go to your dashboard</a></p>"
      },
      "sms": {
        "text": "SOS Expat: {{clientName}} did not answer. Call cancelled, client refunded."
      },
      "inapp": {
        "title": "Call cancelled",
        "body": "Client {{clientName}} did not answer the call",
        "action": {
          "label": "View",
          "deeplink": "/provider/dashboard"
        }
      }
    },
    {
      "id": "provider.set.offline.no_answer",
      "roles": ["provider"],
      "channels": {
        "email": true,
        "sms": false,
        "push": true,
        "inapp": true,
        "whatsapp": false
      },
      "email": {
        "subject": "SOS Expat: You have been set offline",
        "html": "<h2>You Have Been Set Offline</h2><p>You missed a call from a client who needed your help.</p><p style=\"background:#fff3e0;padding:12px;border-radius:4px;\">‚ö†Ô∏è <strong>Your profile is now offline.</strong> You will not receive new booking requests until you reconnect.</p><p>To go back online and receive new bookings:</p><ol><li>Open the SOS Expat app or website</li><li>Go to your dashboard</li><li>Toggle your availability to \"Online\"</li></ol><p><a href=\"https://sos-expat.com/en-us/dashboard\" style=\"background:#4CAF50;color:white;padding:12px 24px;text-decoration:none;border-radius:4px;display:inline-block;\">Go Online Now</a></p><p style=\"color:#666;font-size:12px;\">This helps ensure clients can always reach available providers.</p>"
      },
      "push": {
        "title": "You are now offline",
        "body": "You missed a client call. Tap to go back online."
      },
      "inapp": {
        "title": "You are now offline",
        "body": "You missed a client call. Go to your dashboard to reconnect.",
        "action": {
          "label": "Go Online",
          "deeplink": "/provider/dashboard"
        }
      }
    },
    {
      "id": "handoff.started.client",
      "roles": ["client"],
      "channels": {
        "email": false,
        "sms": false,
        "push": false,
        "inapp": false,
        "whatsapp": false
      }
    },
    {
      "id": "handoff.to.provider",
      "roles": ["provider"],
      "channels": {
        "email": false,
        "sms": false,
        "push": false,
        "inapp": false,
        "whatsapp": false
      }
    },
    {
      "id": "message.new.client",
      "roles": ["client"],
      "channels": {
        "email": false,
        "sms": false,
        "push": false,
        "inapp": false,
        "whatsapp": false
      }
    },
    {
      "id": "message.new.provider",
      "roles": ["provider"],
      "channels": {
        "email": false,
        "sms": false,
        "push": false,
        "inapp": false,
        "whatsapp": false
      }
    },
    {
      "id": "messages.digest.client.daily",
      "roles": ["client"],
      "channels": {
        "email": false,
        "sms": false,
        "push": false,
        "inapp": false,
        "whatsapp": false
      }
    },
    {
      "id": "request.closed.client",
      "roles": ["client"],
      "channels": {
        "email": false,
        "sms": false,
        "push": false,
        "inapp": false,
        "whatsapp": false
      }
    },
    {
      "id": "request.closed.provider",
      "roles": ["provider"],
      "channels": {
        "email": false,
        "sms": false,
        "push": false,
        "inapp": false,
        "whatsapp": false
      }
    },
    {
      "id": "client.post_closure.d7",
      "roles": ["client"],
      "channels": {
        "email": false,
        "sms": false,
        "push": false,
        "inapp": false,
        "whatsapp": false
      }
    },
    {
      "id": "security.suspicious_login",
      "roles": ["client", "provider"],
      "channels": {
        "email": false,
        "sms": false,
        "push": false,
        "inapp": false,
        "whatsapp": false
      }
    },
    {
      "id": "provider.monthly.report",
      "roles": ["provider"],
      "channels": {
        "email": false,
        "sms": false,
        "push": false,
        "inapp": false,
        "whatsapp": false
      }
    },
    {
      "id": "budget.alert.warning",
      "roles": ["admin"],
      "channels": {
        "email": false,
        "sms": false,
        "push": false,
        "inapp": false,
        "whatsapp": false
      }
    },
    {
      "id": "budget.alert.critical",
      "roles": ["admin"],
      "channels": {
        "email": false,
        "sms": false,
        "push": false,
        "inapp": false,
        "whatsapp": false
      }
    },
    {
      "id": "security.daily_report",
      "roles": ["admin"],
      "channels": {
        "email": false,
        "sms": false,
        "push": false,
        "inapp": false,
        "whatsapp": false
      }
    },
    {
      "id": "provider.payout.received",
      "roles": ["provider"],
      "channels": {
        "email": false,
        "sms": false,
        "push": false,
        "inapp": false,
        "whatsapp": false
      }
    },
    {
      "id": "payment_refunded",
      "roles": ["client"],
      "channels": {
        "email": false,
        "sms": false,
        "push": false,
        "inapp": false,
        "whatsapp": false
      }
    },
    {
      "id": "subscription.reminder",
      "roles": ["client", "provider"],
      "channels": {
        "email": false,
        "sms": false,
        "push": false,
        "inapp": false,
        "whatsapp": false
      }
    }
  ]
}
