<!DOCTYPE html>
<html lang="fr">
<head>
  <!-- META ESSENTIELS -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=yes, minimum-scale=1.0, maximum-scale=5.0" />

  <!-- SEO -->
  <title>SOS Expats - Espace Prestataires IA</title>
  <meta name="description" content="Plateforme d'administration et assistant IA pour avocats et expatriés aidants - SOS Expats" />
  <meta name="keywords" content="SOS Expats, assistant IA, avocats, expatriés, administration, prestataires" />
  <meta name="author" content="SOS Expats" />
  <meta name="robots" content="index, follow" />

  <!-- PWA MANIFEST -->
  <link rel="manifest" href="/manifest.webmanifest" />

  <!-- THEME COLOR - Adaptatif light/dark -->
  <meta name="theme-color" content="#DC2626" media="(prefers-color-scheme: light)" />
  <meta name="theme-color" content="#B91C1C" media="(prefers-color-scheme: dark)" />

  <!-- iOS PWA META TAGS -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="SOS Expats" />
  <meta name="apple-touch-fullscreen" content="yes" />

  <!-- APPLE TOUCH ICONS -->
  <link rel="apple-touch-icon" href="/icons/apple-touch-icon.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon-180x180.png" />
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-touch-icon-152x152.png" />
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-touch-icon-120x120.png" />
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-touch-icon-76x76.png" />

  <!-- ANDROID META -->
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="application-name" content="SOS Expats" />

  <!-- MICROSOFT META -->
  <meta name="msapplication-TileColor" content="#DC2626" />
  <meta name="msapplication-TileImage" content="/icons/icon-144x144.png" />
  <meta name="msapplication-config" content="/browserconfig.xml" />

  <!-- FAVICONS -->
  <link rel="icon" type="image/svg+xml" href="/sos-favicon.svg" />
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png" />
  <link rel="shortcut icon" href="/favicon.ico" />

  <!-- PRECONNECT PERFORMANCE -->
  <link rel="preconnect" href="https://firestore.googleapis.com" crossorigin />
  <link rel="preconnect" href="https://www.gstatic.com" crossorigin />
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="dns-prefetch" href="https://firebasestorage.googleapis.com" />
  <link rel="dns-prefetch" href="https://identitytoolkit.googleapis.com" />

  <!-- OPEN GRAPH -->
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://app.sosexpats.com/" />
  <meta property="og:title" content="SOS Expats - Espace Prestataires IA" />
  <meta property="og:description" content="Assistant IA pour avocats et expatriés aidants" />
  <meta property="og:image" content="/icons/og-image.png" />
  <meta property="og:locale" content="fr_FR" />
  <meta property="og:site_name" content="SOS Expats" />

  <!-- TWITTER CARD -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="SOS Expats - Espace Prestataires IA" />
  <meta name="twitter:description" content="Assistant IA pour avocats et expatriés aidants" />
  <meta name="twitter:image" content="/icons/twitter-image.png" />

  <!-- CRITICAL CSS INLINE -->
  <style>
    *{box-sizing:border-box;margin:0;padding:0}
    html{-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent;font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif}
    body{line-height:1.6;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}
    #root{min-height:100vh;min-height:100dvh}

    /* App Loading Skeleton */
    .app-loading{position:fixed;inset:0;background:linear-gradient(135deg,#DC2626 0%,#B91C1C 100%);display:flex;flex-direction:column;align-items:center;justify-content:center;color:#fff;z-index:9999;transition:opacity .3s ease}
    .app-loading__logo{width:80px;height:80px;margin-bottom:24px;animation:pulse 2s ease-in-out infinite}
    .app-loading__text{font-size:18px;font-weight:500;opacity:.9}
    .app-loading__spinner{width:40px;height:40px;border:3px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;margin-top:24px;animation:spin 1s linear infinite}

    @keyframes pulse{0%,100%{transform:scale(1);opacity:1}50%{transform:scale(1.05);opacity:.8}}
    @keyframes spin{to{transform:rotate(360deg)}}

    /* Safe area support */
    @supports(padding:max(0px)){
      body{padding-left:max(0px,env(safe-area-inset-left));padding-right:max(0px,env(safe-area-inset-right))}
    }

    /* Dark mode */
    @media(prefers-color-scheme:dark){
      .app-loading{background:linear-gradient(135deg,#B91C1C 0%,#991B1B 100%)}
    }

    /* Reduced motion */
    @media(prefers-reduced-motion:reduce){
      .app-loading__logo,.app-loading__spinner{animation:none}
    }
  </style>
</head>
<body>
  <!-- Loading Screen -->
  <div id="app-loading" class="app-loading" aria-label="Chargement de l'application">
    <svg class="app-loading__logo" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
      <circle cx="50" cy="50" r="45" stroke="currentColor" stroke-width="4" opacity="0.3"/>
      <path d="M50 15 L50 50 L75 75" stroke="currentColor" stroke-width="6" stroke-linecap="round" stroke-linejoin="round"/>
      <circle cx="50" cy="50" r="8" fill="currentColor"/>
    </svg>
    <div class="app-loading__text">Chargement...</div>
    <div class="app-loading__spinner" role="status" aria-label="En cours de chargement"></div>
  </div>

  <!-- React Root -->
  <div id="root"></div>

  <!-- App Entry -->
  <script type="module" src="/src/main.tsx"></script>

  <!-- Remove loading screen when app is ready -->
  <script>
    (function(){
      var loading=document.getElementById('app-loading');
      if(!loading)return;

      // Hide after React mounts or timeout
      var hideLoading=function(){
        loading.style.opacity='0';
        setTimeout(function(){loading.remove()},300);
      };

      // Listen for React mount
      var observer=new MutationObserver(function(mutations){
        var root=document.getElementById('root');
        if(root&&root.children.length>0){
          observer.disconnect();
          hideLoading();
        }
      });
      observer.observe(document.getElementById('root'),{childList:true});

      // Fallback timeout
      setTimeout(hideLoading,5000);
    })();
  </script>

  <!-- No JavaScript Fallback -->
  <noscript>
    <div style="padding:40px;text-align:center;font-family:sans-serif;background:#FEE2E2;color:#991B1B;min-height:100vh;display:flex;align-items:center;justify-content:center">
      <div>
        <h1 style="font-size:24px;margin-bottom:16px">JavaScript requis</h1>
        <p>Cette application nécessite JavaScript pour fonctionner. Veuillez l'activer dans votre navigateur.</p>
      </div>
    </div>
  </noscript>
</body>
</html>
